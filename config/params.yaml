floor_removal_node:
  ros__parameters:
    # Input topics
    input_cloud_topic: "/camera/depth/color/points"

    # Output topics
    output_floor_cloud_topic: "/floor_cloud"
    output_no_floor_cloud_topic: "/no_floor_cloud"
    output_floor_cloud_voxelized_topic: "/floor_cloud_voxelized"
    output_no_floor_cloud_voxelized_topic: "/no_floor_cloud_voxelized"

    # RANSAC parameters for floor detection
    ransac_distance_threshold: 0.02  # meters - points within this distance are considered inliers
    ransac_max_iterations: 100       # maximum iterations for RANSAC
    floor_normal_z_threshold: 0.7    # minimum Z component of normal in robot frame (Z=up)
                                     # For horizontal floor, nz should be close to 1.0

    # Floor detection mode (robot frame: X=forward, Y=left, Z=up)
    auto_floor_detection_mode: false  # true: auto-detect floor using z_min, false: use floor_height
    floor_height: 0.0                # meters - floor Z coordinate in robot frame when auto_detection is false
                                     # Points with Z <= floor_height + detection_thickness are considered floor

    # Floor region parameters (robot frame: X=forward, Y=left, Z=up)
    floor_detection_thickness: 0.15  # meters - thickness for RANSAC plane detection (15cm)
                                     # Large enough to get sufficient points after voxelization
    floor_removal_thickness: 0.03    # meters - thickness for actual floor removal (3cm)
                                     # Small to preserve objects on floor (e.g., 10cm pallets)
    floor_margin: 0.0               # additional margin around detected floor plane (meters)

    # Voxel grid downsampling (reduces computation and noise)
    use_voxel_grid: true             # enable voxel grid downsampling
    voxel_leaf_size: 0.03            # voxel size (meters) - 1cm, reduces ~100k to ~10-15k points

    # Detection range parameters
    max_detection_distance: 2.0     # maximum detection distance from camera (meters)

    # Pallet stringer detection
    enable_stringer_detection: false  # enable pallet stringer detection
    stringer_width_min: 0.05         # minimum stringer width (meters) - 5cm
    stringer_width_max: 0.1         # maximum stringer width (meters) - 15cm
    stringer_height_min: 0.1        # minimum stringer height (meters) - 8cm
    stringer_height_max: 0.2        # maximum stringer height (meters) - 20cm

    # Camera extrinsic parameters
    # NOTE: Default optical->base transform is ALWAYS applied first
    # (optical: X=right,Y=down,Z=forward -> base: X=forward,Y=left,Z=up)

    use_default_transform: false      # true: use only default transform
                                     # false: apply ADDITIONAL extrinsic on top of default

    # Additional extrinsic transform (only used if use_default_transform: false)
    # Applied AFTER default optical->base transform
    # Translation: additional camera offset in robot base frame (meters)
    cam_tx: 0.0                      # X offset (forward)
    cam_ty: 0.0                      # Y offset (left)
    cam_tz: 0.16                      # Z offset (up)

    # Rotation: Euler angles in robot base frame (radians) - ZYX order
    cam_roll: 0.0                    # rotation around X axis (radians)
    cam_pitch: 0.2356194                 # rotation around Y axis (radians)
    cam_yaw: 0.0                     # rotation around Z axis (radians)
